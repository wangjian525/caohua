# README
# modelservice.newimage.caohua.com

纯新素材投放AI模型项目

### 2021.6.23 v1.0
    预发布环境 - 末日2测新上线通过

### 2021.6.24 v1.1
    生产环境 - 上线逻辑增加：
    1）新素材匹配需要，中间件ID对应的游戏ID集，用实时代码更新；
    2）新素材采集的条件限制三：label_id写死为20；
    3）测新表实时累计更新；
    4）账号、新素材的资源匹配，更改为新素材全测，且每条新素材下测3条计划，所有计划的归属满足账号的容积限制、排重限制；

### 2021.6.25 v1.2
    生产环境 - 字段类型修正：
    1）ROI_COEFFICIENT出价方式与roi_goal字段取值的对应；
    2）非list类型的字段，把空list都替换为NaN，防计划报错；
    3）inventory_type流量位，剔除None异常；

### 2021.6.29 v1.3
    生产环境 - 字段业务取值：
    1）所有测新计划流量位写死为：穿山甲,抖音信息流,番茄小说；
    2）所有测新计划年龄定向写死为：18~50区间；
    3）定时字段对齐AI投放模型；
    4）落地页对齐AI投放模型；

### 2021.6.30 v1.4
    生产环境 - 调整末日2的出价：
    1）600~650调整为580~630；
    2）手机价格统一定向1500以上；

### 2021.7.1 v1.5
    预发布环境 - 增加帝国测新部分（进行中）：
    1）帝国新素材筛选没有固定的label_ids；
    2）帝国新素材筛选匹配对应的中间件game_ids；
    3）暂时：每条素材固定建3条（后续看能否根据匹配度修改）

### 2021.7.2 v1.6
    预发布环境 - 增加帝国测新部分（进行中）：
    1）帝国：数据采集排除image_info与launch_report的历史部分；
    2）末日2+帝国：投放方式采用优先跑量和均衡投放2者对等随机；
    3）帝国：测新整体逻辑跟末日2差别不大，待上线再做针对性改动；

### 2021.7.2 v1.7
    生产环境 - 增加未测or未消耗新素材的找回策略：
    1）keep='first'：代表保留素材的入库记录不再重复测新（遗漏素材不再参与）
    2）keep='last'：代表重建素材的入库记录进行重新测新（遗漏素材再次参与）✔

### 2021.7.3 v1.8
    生产环境 - 放宽新素材的界定限制：
    1）纯新素材：素材没有过评分且素材没有创建过计划；
    2）老新素材：素材有过评分但消耗在1000以上3000以内的记录；
    3）优点一：keep='last'模式下，防止消耗不够未评分的质量较差素材，重复建计划测新；
    4）优点二：对有过评分但消耗在3000以内的新素材，重测到位并更新打分；

### 2021.7.5 v1.9
    生产环境 - 项目目录结构调整：
    1）预留2种媒体、2种游戏的工程调用目录结构；

### 2021.7.12 v1.10
    生产环境 - 末日测新逻辑确认：
    1）每天上午10点，下午3点，共两次扫描；
    2）测试无评分素材及消耗未满足6000的素材；
    3）出价调高至600~650之间；
    4）流量位逻辑不写死；

### 2021.7.13 v2.1
    生产环境 - 增加帝国测新部分（已完成）
    1）测试环境测试通过；
    2）预发布环境上线通过；

### 2021.7.14 v2.2
    生产环境 - 末日测新自动化
    1）末日测新每天上午10点，下午3点，两次自动化扫描创建计划；
    2）帝国返新素材测试的消耗上限降至5000；
    3）帝国更改落地页；
    4）末日、帝国地域定向均采用历史优质定向；

### 2021.7.20 v2.3
    预发布环境 - 增加广点通媒体的末日测新（进行中）：
    1）本地测试已通过；
    2）待预发布环境上线建计划测试；

### 2021.8.10 v3.0
    预发布环境 - 测新逻辑v3.0：
    1）素材单条计划产生付费时，计划付费标记与计划复制；
    2）素材单条计划跑不动规则触发时，计划的出价调整与调整标记（待涉及系统后端接口的联调）；
    3）素材整体消耗不达标规则触发时，该素材下消耗与成本俱佳计划的复制；
    4）素材筛选钉钉消息推送；
    5）目前，__只支持头条的末日与帝国__；

### 2021.8.17 v3.1
    预发布环境 - 广点通末日本地测试通过：
    1）素材单条计划产生付费时，计划付费标记与计划复制；
    2）素材单条计划跑不动规则触发时，计划的出价调整与调整标记（待涉及系统后端接口的联调）；
    3）素材整体消耗不达标规则触发时，该素材下消耗与成本俱佳计划的复制；
    4）素材筛选钉钉消息推送；
    5）目前，__支持头条的末日与帝国，以及广点通的末日__；

### 2021.8.25 v3.2
    生产环境 - 广点通末日新素材对应的子素材版位尺寸的匹配问题：
    1）广点通测新与广点通智能投放，最大的区别在于素材全新，新素材下的子素材与版位尺寸对应规则不明；
    2）解决方案：根据随机计划的版位与旧子素材对应标准，选择与旧子素材尺寸一样的新子素材做替换；
    3）目前，__支持头条的末日与帝国，以及广点通的末日__；

### 2021.9.7 v3.3
    生产环境 - 广点通末日测新计划全部采用新包：
    1）新包体的游戏game_id对齐；
    2）新包体的应用promoted_object_id对齐；
    3）BUG：复制计划时，子素材尺寸匹配重复异常的bug修复；
    4）目前，__支持头条的末日与帝国，以及广点通的末日__；

### 2021.9.15 v3.4
    生产环境 - 广点通末日测新增加版位测试功能：
    1）测试脚本：7个大版位，每条计划1个版位，每个素材7条计划；
    2）测新逻辑：
       2.1）优化了微信以外的普通版位不支持跑付费次数的问题；
       2.2）优化了创意元素子素材ID异常，导致版位尺寸要求匹配不到主素材的问题；
       2.3）优化了近期微信公众号版位没有计划，导致测试不了该版位的问题；
    3）调整：MySQL数据库权限收回，线上readonly账号全部替换；
    4）目前，__支持头条的末日与帝国，以及广点通的末日__；

### 2021.9.16 v3.5
    预发布环境 - 广点通末日测新增加帝国广点通：
    1）帝国暂不测版位；
    2）帝国新素材选取，有别于末日，只选取启航组且game_id有既定要求；
    3）目前，__支持头条的末日与帝国，以及广点通的末日与帝国__；